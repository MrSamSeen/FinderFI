<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>File Browser</title>
    <style>
      body {
        font-family: Arial, sans-serif;
      }
      .btn {
        margin: 10px;
        padding: 10px;
        background-color: #4caf50;
        color: white;
        border: none;
        cursor: pointer;
      }
      .file-list {
        margin-top: 20px;
      }
      .file-item {
        margin: 5px 0;
      }
      .file-item a {
        text-decoration: none;
        color: #007bff;
      }
      .file-item a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <button class="btn" onclick="location.href='/'">Back to Root</button>
    <button class="btn" onclick="location.href='../'">Up One Directory</button>
    <div class="file-list" id="file-list"></div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        fetch("/")
          .then((response) => response.text())
          .then((html) => {
            console.log("Fetched HTML:", html); // Debug log
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, "text/html");
            const links = doc.querySelectorAll("a");
            const fileList = document.getElementById("file-list");

            links.forEach((link) => {
              const listItem = document.createElement("div");
              listItem.className = "file-item";
              const href = link.getAttribute("href");
              const text = link.textContent;
              listItem.innerHTML = `<a href="${href}">${text}</a>`;
              fileList.appendChild(listItem);
            });
          })
          .catch((error) => {
            console.error("Error fetching files:", error); // Debug log
          });
      });
    </script>
  </body>
</html>
